<!--
 * @Author: psq
 * @Date: 2023-04-24 15:34:15
 * @LastEditors: psq
 * @LastEditTime: 2023-11-29 19:10:27
-->
<!DOCTYPE html>
<html>
<head>
  <title>gateway-websocket 连接示例</title>
  <p></p>
  <form>
      <input type="text" class="clientid">
      <button type="button">连接</button>
  </form>
</head>
<body>
<script>

    var i = 0

    var ws = new WebSocket("ws://127.0.0.1:8282");

    // 监听收到消息事件
    ws.onmessage = function(event) {
      
        if (i == 0) {

            console.log('你的clientID：' + event.data)
            i++
        }

        if (event.data != "pong") {
            
            console.log(JSON.parse(event.data))
        }
    };

    ws.onclose = function(event) {

        console.log('ws连接已关闭')
    }

    setInterval(function() {

        if (ws.readyState === WebSocket.OPEN) {
            ws.send('ping');
        }
    }, 15000);
</script>
</body>
</html>